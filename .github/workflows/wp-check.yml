name: 'WP plugin check'
on:
  push:
    branches: "*"
  pull_request:
jobs:
  standard:
    runs-on: ubuntu-latest
    steps:
    - name: Checkout
      uses: actions/checkout@v4
      with:
        path: 'lumiere-movies'
        
    - name: Restore Cache
      uses: actions/cache/restore@v4
      with:
        path: |
          vendor
          node_modules
          dist
        key: deps-prod-${{ hashFiles('composer.lock') }}-${{ hashFiles('package-lock.json') }}
        fail-on-cache-miss: true
      id: cache
            
    - name: Run plugin check
      uses: wordpress/plugin-check-action@v1
      with:
        build-dir: './dist'
        exclude-directories: 'vendor,.wordpress-org'

