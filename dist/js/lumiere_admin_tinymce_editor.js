!function(i){tinymce.create("tinymce.plugins.lumiere_link_maker",{init:function(n,e){lumiere_admin_vars.imdb_path;n.addButton("lumiere_tiny",{title:"Lumière! add info",image:lumiere_admin_vars.imdb_path+"pics/lumiere-ico-noir13x13.png",type:"menubutton",menu:[],menu:[{text:"Add a popup",image:lumiere_admin_vars.imdb_path+"pics/lumiere-ico-noir13x13.png",onclick:function(){var e=n.selection.getContent();n.windowManager.open({width:300,height:150,title:"Lumière! Add a link to a popup",body:[{type:"textbox",name:"textboxName",label:"Movie title",value:e}],onsubmit:function(e){!(target="")===e.data.blank&&(target+='newtab="on"'),n.insertContent(' <span data-lum_link_maker="popup">'+e.data.textboxName+"</span> ")}})},onPostRender:function(){var t=this;n.on("NodeChange",function(e){var i=jQuery(n.selection).attr("data-lum_link_maker");t.active(i)})}},{text:"Add a movie section",onclick:function(){var e=n.selection.getContent();n.windowManager.open({width:450,height:200,title:"Lumière! Add a movie section inside the post",body:[{type:"textbox",name:"movieReference",label:"Movie title/IMDb ID",value:e},{type:"listbox",image:lumiere_admin_vars.imdb_path+"pics/lumiere-ico-noir13x13.png",name:"movieFormat",label:"My movie is inserted by:",values:[{text:"By title",value:"movie_title"},{text:"By id",value:"movie_id"}]},{type:"button",name:"IMDbID",label:"Find IMDb ID",text:"Open Search Window",onclick:function(){n.windowManager.open({title:"Internal Query to find IMDb ID",file:lumiere_admin_vars.wordpress_path+lumiere_admin_vars.gutenberg_search_url,width:500,height:400,inline:1},{editor:n,jquery:i,valid_value:"value"})}}],onsubmit:function(e){!(target="")===e.data.blank&&(target+='newtab="on"'),n.insertContent(' <span data-lum_movie_maker="'+e.data.movieFormat+'">'+e.data.movieReference+"</span> ")}})},onPostRender:function(){var t=this;n.on("NodeChange",function(e){var i=jQuery(n.selection).attr("data-lum_movie_maker");t.active(i)})}},{text:"Find IMDb ID",onclick:function(){n.windowManager.open({title:"Internal Query to find IMDb ID",file:lumiere_admin_vars.wordpress_path+lumiere_admin_vars.gutenberg_search_url,width:600,height:500,inline:1},{editor:n,jquery:i,valid_value:"value"})}}]})},getInfo:function(){return{longname:"Lumière TinyMCE editor",author:"JCV",authorurl:"https://www.jcvignoli.com/blog",infourl:"https://www.jcvignoli.com/en/lumiere-movies-wordpress-plugin/",version:"4.0"}}}),tinymce.PluginManager.add("lumiere_tiny",tinymce.plugins.lumiere_link_maker)}(jQuery);