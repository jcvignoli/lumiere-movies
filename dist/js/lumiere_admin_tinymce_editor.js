jQuery,tinymce.create("tinymce.plugins.lumiere_link_maker",{extended_valid_elements:["+@[data-lum_link_maker]","+@[data-lum_movie_maker]"],init:function(i,e){lumiere_admin_vars.imdb_path;i.addButton("lumiere_tiny",{title:"Lumière! add info",image:lumiere_admin_vars.imdb_path+"pics/lumiere-ico-noir13x13.png",type:"menubutton",menu:[{title:"Add popup span",text:"Turn into popup",onclick:function(){var e=i.selection.getContent(),t="";this.active(!this.active()),this.active()?i.execCommand("mceInsertContent",0,t='<span data-lum_link_maker="popup">'+e+"</span>"):(t=(t=e).replace(/<\/?img(.*)>/gi,""),t=i.selection.setContent(t),i.execCommand("mceReplaceContent",0,t))},onPostRender:function(){var n=this;i.on("NodeChange",function(e){var t=jQuery(i.selection).attr("data-lum_link_maker");n.active(t)})}},{title:"Use this title for a movie section based on title",text:"Movie section using movie title",onclick:function(){var e=i.selection.getContent(),t="";this.active(!this.active()),this.active()?i.execCommand("mceInsertContent",0,t='<span data-lum_movie_maker="movie_title">'+e+"</span>"):(i.selection.setContent(t=e),i.execCommand("mceReplaceContent",0,t))},onPostRender:function(){var n=this;i.on("NodeChange",function(e){var t=jQuery(i.selection).attr("data-lum_movie_maker");n.active(t)})}},{title:"Use this imdb id for a movie section based on title",text:"Movie section using movie IMDb ID",onclick:function(){var e=i.selection.getContent();this.active(!this.active()),this.active()?i.execCommand("mceInsertContent",0,'<span data-lum_movie_maker="movie_id">'+e+"</span>"):i.execCommand("mceReplaceContent",0,e)},onPostRender:function(){var n=this;i.on("NodeChange",function(e){var t=jQuery(i.selection).attr("data-lum_movie_maker");n.active(t)})}}]})},getInfo:function(){return{longname:"Lumière TinyMCE editor",author:"JCV",authorurl:"https://www.jcvignoli.com/blog",infourl:"https://www.jcvignoli.com/en/lumiere-movies-wordpress-plugin/",version:"3.0"}}}),tinymce.PluginManager.add("lumiere_tiny",tinymce.plugins.lumiere_link_maker);